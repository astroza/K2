Felipe Astroza - 02/2007

Este documento trata de explicar el dise√±o y las reglas que rodean la implementacion de UCMP.
Espero que sea de gran ayuda para entender su funcionamiento.

--------------------------------------------------------------------------------------------------
 Definiciones previas:
 BCHS: Bit changes size, llamo BCHS a los bits de la cabezera que cambian el tamaÒo de un frame.

--------------------------------------------------------------------------------------------------
  La implementacion de UCMP se llevo acabo de la siguiente forma:

   System/Network/machine/$(machine)/default.c
   System/Network/machine/$(machine)/default.h
   System/Network/machine/$(machine)/types.h

  Pertenecen a la seccion MAQUINA-DEPENDIENTE de UCMP, las prestaciones dependen
  de las caracteristicas de la arquitectura. Las funciones que _deben_ ser implementadas y las definiciones
  basicas son:

  default.c:
    NNNN_table(): Traduce los bits NNNN a cantidad de octetos.
    calculate_size(): Calcula la cantidad de octetos que usa un frame. Se basa en todo
    los BCHS's de la cabezera.
    do_send_frame(): Encargada de enviar la cadena de bytes.
    waiting_event(): Espera eventos relevantes.
    ack_wait(): Prepara la espera de un ack.

  default.h:
    FRAMEMAXSIZE: Constante que representa el maximo tama√±o de un frame.
    CLR_HEADER(a): Codigo que limpia (a)->hd[B2] y (a)->hd[B1].

  types.h:
    Definicion de tipos de datos elementales:
    uint8
    uint16
    uint32
    int8
    int16
    int32
    frmlen
    ADDR_LEN: Constante que representa la maxima longitud de una direccion en la maquina. (Maximo permitido 3, minimo 1)

  Ademas esta permitido agregar funciones especificas de la arquitectura adicionales a las ya nombradas.

--------------------------------------------------------------------------------------------------
  La seccion INDEPENDIENTE contiene los siguientes ficheros:

   System/Network/ucmp.c
   System/Network/ucmp.h

  Esta seccion contiene codigo independiente de la arquitectura, tratare de explicar su dise√±o:
  - ucmp.c se compone de una estructura anomima principal referenciada con el nombre 'ucmp', sus
    miembros son los siguientes:
	* sys_addr: Es una estructura tipo 'private_address', la cual contiene la direccion local del nodo
	* sys_bits: Mantiene los estados del sistema.
	* sys_frame: Direccion de memoria o puntero a el segmento donde se almacena un frame entrante.
	* ack_from: Es una estructura tipo 'private_address', cuyo valor es la direccion de red de quien
	  se espera un ACKNOWNLEDGE o NOT ACKNOWNLEDGE
	* sys_userfunction: Puntero a la funcion llamada luego de recibir un frame.

	Mayor informacion sobre rutinas utilizables, en System/Network/ucmp.c
